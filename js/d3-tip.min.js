import{map as map}from"d3-collection";import{selection as selection,select as select}from"d3-selection";export default function(){var s=function(){return"n"},f=function(){return[0,0]},u=function(){return" "},a=document.body,e=t(),n=null,c=null,p=null;function y(t){(n=function(t){t=t.node();return t?"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement:null}(t))&&(c=n.createSVGPoint(),a.appendChild(e))}y.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(p=t.pop());var e=u.apply(this,t),n=f.apply(this,t),r=s.apply(this,t),o=d(),l=m.length,i=document.documentElement.scrollTop||a.scrollTop,t=document.documentElement.scrollLeft||a.scrollLeft;for(o.html(e).style("opacity",1).style("pointer-events","all");l--;)o.classed(m[l],!1);return e=h.get(r).apply(this),o.classed(r,!0).style("top",e.top+n[0]+i+"px").style("left",e.left+n[1]+t+"px"),y},y.hide=function(){return d().style("opacity",0).style("pointer-events","none"),y},y.attr=function(t,e){if(arguments.length<2&&"string"==typeof t)return d().attr(t);var n=Array.prototype.slice.call(arguments);return selection.prototype.attr.apply(d(),n),y},y.style=function(t,e){if(arguments.length<2&&"string"==typeof t)return d().style(t);var n=Array.prototype.slice.call(arguments);return selection.prototype.style.apply(d(),n),y},y.direction=function(t){return arguments.length?(s=null==t?t:o(t),y):s},y.offset=function(t){return arguments.length?(f=null==t?t:o(t),y):f},y.html=function(t){return arguments.length?(u=null==t?t:o(t),y):u},y.rootElement=function(t){return arguments.length?(a=null==t?t:o(t),y):a},y.destroy=function(){return e&&(d().remove(),e=null),y};var h=map({n:function(){var t=r(this);return{top:t.n.y-e.offsetHeight,left:t.n.x-e.offsetWidth/2}},s:function(){var t=r(this);return{top:t.s.y,left:t.s.x-e.offsetWidth/2}},e:function(){var t=r(this);return{top:t.e.y-e.offsetHeight/2,left:t.e.x}},w:function(){var t=r(this);return{top:t.w.y-e.offsetHeight/2,left:t.w.x-e.offsetWidth}},nw:function(){var t=r(this);return{top:t.nw.y-e.offsetHeight,left:t.nw.x-e.offsetWidth}},ne:function(){var t=r(this);return{top:t.ne.y-e.offsetHeight,left:t.ne.x}},sw:function(){var t=r(this);return{top:t.sw.y,left:t.sw.x-e.offsetWidth}},se:function(){var t=r(this);return{top:t.se.y,left:t.se.x}}}),m=h.keys();function t(){var t=select(document.createElement("div"));return t.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function d(){return null==e&&(e=t(),a.appendChild(e)),select(e)}function r(t){for(var e=p||t;null==e.getScreenCTM&&null!=e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),o=e.getBBox(),l=o.width,i=o.height,t=o.x,o=o.y;return c.x=t,c.y=o,n.nw=c.matrixTransform(r),c.x+=l,n.ne=c.matrixTransform(r),c.y+=i,n.se=c.matrixTransform(r),c.x-=l,n.sw=c.matrixTransform(r),c.y-=i/2,n.w=c.matrixTransform(r),c.x+=l,n.e=c.matrixTransform(r),c.x-=l/2,c.y-=i/2,n.n=c.matrixTransform(r),c.y+=i,n.s=c.matrixTransform(r),n}function o(t){return"function"==typeof t?t:function(){return t}}return y}